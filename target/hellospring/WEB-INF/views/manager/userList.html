<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <div th:replace="fragments/resourceLink :: resourceLink"></div>
    <script type="text/javascript" src="../../../resources/js/userList.js"></script>
    <title>manager&userList</title>
</head>

<body>
<div class="navbar navbar-inverse" th:replace="fragments/header :: header">
    heah
</div>


<!-- Page container -->
<div class="page-container">

    <!-- Page content -->
    <div class="page-content">

        <!-- Main sidebar -->
        <div class="sidebar sidebar-main">
            <div th:replace="fragments/leftmanager :: leftmanager"></div>
        </div>
        <!-- /main sidebar -->


        <!-- Main content -->
        <div class="content-wrapper">

            <!-- Page header -->
            <div class="page-header page-header-default">
                <div class="page-header-content">
                    <div class="page-title">
                        <h3 data-th-text="管理员页面"></h3>
                    </div>

                    <div class="heading-elements">
                        <div class="heading-btn-group hidden">
                            <a href="#" class="btn btn-link btn-float has-text"><i
                                    class="icon-bars-alt text-primary"></i><span>Statistics</span></a>
                            <a href="#" class="btn btn-link btn-float has-text"><i
                                    class="icon-calculator text-primary"></i> <span>Invoices</span></a>
                            <a href="#" class="btn btn-link btn-float has-text"><i
                                    class="icon-calendar5 text-primary"></i> <span>Schedule</span></a>
                        </div>
                    </div>
                </div>

                <div class="breadcrumb-line">
                    <ul class="breadcrumb" style="float: left;">
                        <li class="active"><a href="#"><i class="icon-arrow-right8 position-left"></i>用户列表</a></li>

                    </ul>

                </div>
            </div>
            <!-- /page header -->

            <div class="content">
                <div class="panel">
                    <div class="panel-heading"></div>
                    <div class="panel-body">
                        <div class="middlebody col-md-12 column">

                            <div class="col-md-12 column">
                                <div class="panel-group" id="panel-567310">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <a class="panel-title collapsed" data-toggle="collapse"
                                               data-parent="#panel-567310" href="#panel-element-650746">添加</a>
                                        </div>
                                        <div id="panel-element-650746" class="panel-collapse collapse">
                                            <div class="panel-body">
                                                <form role="form" class="form-inline" >
                                                    <div class="form-group">
                                                        <label for="exampleInput1">姓名</label>
                                                        <input type="text" class="form-control" id="exampleInput1" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="exampleInput2">密码</label>
                                                        <input type="text" class="form-control" id="exampleInput2" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="exampleInput3">邮箱</label>
                                                        <input type="text" class="form-control" id="exampleInput3" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="exampleInput4">电话</label>
                                                        <input type="text" class="form-control" id="exampleInput4" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="exampleInput5">角色</label>
                                                        <select id="exampleInput5" class="form-control">
                                                            <option value = 0>普通用户</option>
                                                            <option value = 1>学生</option>
                                                            <option value = 2>教师</option>
                                                            <option value = 3>管理员</option>
                                                        </select>
                                                    </div>
                                                    <button type="button" onclick="addUser()" class="btn btn-default">Submit</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- <form class="righttable " align="center" method="get" id="mainform" th:action="@{/userList}">-->
                            <!--上面搜索栏+排序-->
                            <form  th:href="@{/userList}" method="post" name="searchform" th:replace="fragments/searchbox :: searchbox"></form>
                          <!--  <div class="pull-right">
                                <table class="searchbox1">
                                    <tbody class="pull-right" align="center">
                                    <tr>
                                        <td>
                                            <div id="header-wrap" class="header-wrap ">
                                                <div class="header-bd" id="look1">
                                                    &lt;!&ndash;<div th:if="${userIncre.countAll != null}" >
                                                        <p th:text="|用户总数:${userIncre.countAll}昨日新增用户:${userIncre.countYester}今日新增用户:${userIncre.countToday}|" ></p>
                                                    </div>&ndash;&gt;
                                                    <div><p th:text="用户总数 "></p></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="padding-left: 300px">
                                            <form th:href="@{/userList}" method="post">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" placeholder="模糊搜索"
                                                           name="title" th:value="${title}" th:id="title"/>
                                                    <input class="hidden" th:value="${flag}" name="flag" id="flag"/>
                                                    <input class="hidden" th:value="${num}" name="num" id="num"/>
                                                    &lt;!&ndash;     <input class="hidden" name="_csrf" th:value="${_csrf.token}"/>&ndash;&gt;
                                                    <span class="input-group-btn">
                                                            <button class="btn btn-warning"
                                                                    type="submit">搜索</button>
                                                        </span>
                                                </div>&lt;!&ndash; /input-group &ndash;&gt;
                                            </form>
                                        </td>
                                        <td style="padding-left: 20px">
                                            <label style="padding-top: 8px;"><span></span>
                                                <select class="btn btn-ms btn-default"
                                                        onchange="numsearch(this,options[selectedIndex].value)"
                                                        th:flag="${flag}"
                                                        style="padding-left: 4px">
                                                    <option >选择页数</option>
                                                    <option value="/userList?num=10">10</option>
                                                    <option value="/userList?num=50">50</option>
                                                    <option value="/userList?num=100">100</option>
                                                    <option value="/userList?num=300">300</option>
                                                    <option value="/userList?num=600">600</option>
                                                </select>
                                            </label>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>-->


                            <!--方案列表表格-->
                            <div class="col-md-12 column">
                                <ul class="nav nav-tabs">
                                    <li class="active"><a href="#tab1" data-toggle="tab">用户列表</a></li>
                                </ul>
                                <div class="tab-content col-lg-12 col-xs-12 col-sm-12 col-md-12">
                                    <div class="tab-pane fade in active" id="tab1">
                                        <div class="row clearfix">
                                            <div class="col-md-12 column">
                                            <table class="table table-striped table-hover">
                                                <thead>
                                                <tr>
                                                    <th>
                                                        <a th:href="@{/userList?(flag=(${flag} != 4)?4:5,title=${title},num=${num})}"
                                                           class="label label-success">用户id</a>
                                                        <i th:class="${flag} == 4?'icon-arrow-up-right3':'hidden'"></i>
                                                        <i th:class="${flag} == 5?'icon-arrow-down-right3':'hidden'"></i>
                                                    </th>
                                                    <th>
                                                        <a th:href="@{/userList?(flag=(${flag} != 2)?2:3,title=${title},num=${num})}"
                                                           class="label label-success">用户名</a>
                                                        <i th:class="${flag} == 2?'icon-arrow-up-right3':'hidden'"></i>
                                                        <i th:class="${flag} == 3?'icon-arrow-down-right3':'hidden'"></i>
                                                    </th>
                                                    <th>
                                                        <a th:href="@{/userList?(flag=(${flag} != 0)?0:1,title=${title},num=${num})}"
                                                           class="label label-success">注册时间</a>
                                                        <i th:class="${flag} == 1?'icon-arrow-up-right3':'hidden'"></i>
                                                        <i th:class="${flag} == 0?'icon-arrow-down-right3':'hidden'"></i>
                                                    </th>
                                                    <th>
                                                        <a th:href="@{/userList?(flag=(${flag} != 6)?6:7,title=${title},num=${num})}"
                                                           class="label label-success">角色</a>
                                                        <i th:class="${flag} == 6?'icon-arrow-up-right3':'hidden'"></i>
                                                        <i th:class="${flag} == 7?'icon-arrow-down-right3':'hidden'"></i>
                                                    </th>
                                                    <th>操作</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr th:each="user,userStat:${userList}">
                                                    <td th:text="${user.userId}">userID</td>
                                                    <td th:text="${user.userName}">jack</td>
                                                    <td th:text="${user.createTime}">2016-11-22</td>
                                                    <td th:text="${user.rolename} == null?'0':${user.rolename}">45</td>
                                                    <td>
                                                        <a class="label label-default"
                                                           th:userid="${user.userId}"
                                                           th:role="${user.role}"
                                                           onclick="deleteUser(this)">删除</a>
                                                        <a class="label label-info" data-toggle="modal" data-target="#myModal">修改</a>
                                                        <!-- 模态框（Modal） -->
                                                        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                                        <h4 class="modal-title" id="myModalLabel">修改</h4>
                                                                    </div>
                                                                    <div class="modal-body row">
                                                                        <form enctype="multipart/form-data" method="post" class="form-horizontal">
                                                                                <div class="md-col hidden">
                                                                                    <label for="modifyInput1"
                                                                                           class="control-label col-md-2">用户ID</label>
                                                                                    <div class="col-md-10">
                                                                                        <input type="text"
                                                                                               class="form-control"
                                                                                               id="modifyInput1"
                                                                                               th:value="${user.userId}"/>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="md-col">
                                                                                    <label for="modifyInput2"
                                                                                           class="control-label col-md-2">用户姓名</label>
                                                                                    <div class="col-md-10">
                                                                                        <input type="text"
                                                                                               class="form-control"
                                                                                               id="modifyInput2"
                                                                                               th:placeholder="${user.userName}"/>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="md-col">
                                                                                    <label for="modifyInput3"
                                                                                           class="control-label col-md-2">用户密码</label>
                                                                                    <div class="col-md-10">
                                                                                <textarea class="form-control"
                                                                                          id="modifyInput3"
                                                                                          th:text="${user.Password}"></textarea>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="md-col">
                                                                                    <label for="modifyInput4"
                                                                                           class="control-label col-md-2">用户电话</label>
                                                                                    <div class="col-md-10">
                                                                                        <input type="text"
                                                                                               class="form-control"
                                                                                               id="modifyInput4"
                                                                                               th:placeholder="${user.mobilePhone}"/>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="md-col">
                                                                                    <label for="modifyInput5"
                                                                                           class="control-label col-md-2">角色</label>
                                                                                    <div class="col-md-10">
                                                                                        <select id="modifyInput5" class="form-control">
                                                                                            <option value = 0>普通用户</option>
                                                                                            <option value = 1>学生</option>
                                                                                            <option value = 2>教师</option>
                                                                                            <option value = 3>管理员</option>
                                                                                        </select>
                                                                                    </div>
                                                                                </div>
                                                                        </form>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                                                        <button type="button" class="btn btn-primary" onclick="modifyUser();">提交</button>
                                                                    </div>
                                                                </div><!-- /.modal-content -->
                                                            </div><!-- /.modal -->
                                                        </div>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            </div>
                                        </div>
                                        <!--楼下分页-->
                                        <div class="page row clearfix">
                                            <div class="col-md-offset-4 column">
                                                <ul class="pagination pagination-sm">
                                                    <!--前一页-->
                                                    <li><a th:if="${page.currentPage} gt 1"
                                                           th:href="@{/userList?(currentPage=${page.currentPage-1},flag=${flag},num=${num},title=${title})}">&laquo;</a>
                                                    </li>
                                                    <!--首页-->
                                                    <li th:class="${page.currentPage le 1} ? 'disabled' : ''">
                                                        <a th:if="${page.currentPage != 1}"
                                                           th:href="@{${keywords != null? '/userList' : '/userList'}(currentPage=1,keywords=${keywords != null}?${keywords}:'',flag=${flag},num=${num},title=${title})}">首页</a>
                                                        <a th:if="${page.currentPage == 1}" href="javascript:void(0);">首页</a>
                                                    </li>
                                                    <!--动态生成中间的页码格子-->
                                                    <li th:each="pageNo : ${#numbers.sequence(page.currentPage - 3 < 0 ? 0 : page.currentPage - 3, (page.currentPage + 3 > page.totalPage - 3 ? page.totalPage - 1: page.currentPage + 3))}"
                                                        th:class="${page.currentPage eq (pageNo+1)}? 'active' : ''">
                                                        <a th:if="${page.currentPage  eq (pageNo+1)}"
                                                           href="javascript:void(0);">
                                                            <text th:text="${pageNo+1}"></text>
                                                        </a>
                                                        <a th:if="${not (page.currentPage eq (pageNo+1))}"
                                                           th:href="@{${keywords != null ? '/userList' : '/userList'}(currentPage=${pageNo+1},keywords=${keywords != null}?${keywords}:'',flag=${flag},num=${num},title=${title})}">
                                                            <text th:text="${pageNo+1}"></text>
                                                        </a>
                                                    </li>
                                                    <!--尾页-->
                                                    <li th:class="${page.currentPage ge page.totalPage} ? 'disabled' : ''">
                                                        <a th:if="${page.currentPage != page.totalPage}"
                                                           th:href="@{${keywords != null? '/userList' : '/userList'}(currentPage=${page.totalPage},keywords=${keywords != null}?${keywords}:'',flag=${flag},num=${num},title=${title})}">末页</a>
                                                        <a th:if="${page.currentPage == page.totalPage}"
                                                           href="javascript:void(0);">末页</a>
                                                    </li>
                                                    <!--下一页-->
                                                    <li><a th:if="${page.currentPage} lt ${page.totalPage}"
                                                           th:href="@{/userList?(currentPage=${page.nextPage},flag=${flag},num=${num},title=${title})}">&raquo;</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <!-- </form>-->
                        </div>

                    </div><!-- panel-body-->
                </div> <!--panel-->
            </div><!-- content-->

            <!--页脚-->
            <div th:replace="fragments/footer :: footer" class="col-lg-12">
                &copy; 2013 The Static Templates
            </div>
        </div>
        <!-- /main content -->

    </div>
    <!-- /page content -->


</div>
<!-- /page container -->

</body>
</html>
</body>
</html>